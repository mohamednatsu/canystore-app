"use strict";(self.webpackChunke_commerce_app=self.webpackChunke_commerce_app||[]).push([[26],{8026:(J,d,i)=>{i.r(d),i.d(d,{SettingsModule:()=>P});var m=i(6814),c=i(6026),r=i(95),t=i(4769),p=i(9862);let l=(()=>{class e{constructor(o){this._httpclient=o,this.baseURL="https://ecommerce.routemisr.com/api/v1/auth/"}forgetPassword(o){return this._httpclient.post(this.baseURL+"forgotPasswords",{email:o})}verifyResetCode(o){return this._httpclient.post(this.baseURL+"verifyResetCode",{resetCode:o})}resetPassword(o){return this._httpclient.put(this.baseURL+"resetPassword",o)}static#t=this.\u0275fac=function(s){return new(s||e)(t.LFG(p.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function u(e,a){if(1&e&&(t.TgZ(0,"p",7),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Oqu(o.messageError)}}function f(e,a){if(1&e&&(t.TgZ(0,"div",5),t.YNc(1,u,2,1,"p",6),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.accountNotFound)}}function g(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.forgetPassword(n.emailForm))}),t.TgZ(1,"h2",9),t._uU(2,"Forget Password"),t.qZA(),t.TgZ(3,"div",10)(4,"label",11),t._uU(5,"Email :"),t.qZA(),t._UZ(6,"input",12),t.qZA(),t.TgZ(7,"button",13),t._uU(8,"Send"),t.qZA()()}if(2&e){const o=t.oxw();t.Q6J("formGroup",o.emailForm)}}function _(e,a){if(1&e&&(t.TgZ(0,"div",14)(1,"h2",15),t._uU(2),t.qZA()()),2&e){const o=t.oxw();t.xp6(2),t.Oqu(o.message)}}function h(e,a){if(1&e&&(t.TgZ(0,"p",7),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Oqu(o.messageErrorCode)}}function w(e,a){if(1&e&&(t.TgZ(0,"div",5),t.YNc(1,h,2,1,"p",6),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.codeIsInvalid)}}function v(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1,"Send"),t.qZA())}function x(e,a){1&e&&(t.TgZ(0,"span"),t._UZ(1,"i",18),t.qZA())}function C(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"form",8),t.NdJ("ngSubmit",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.verifySendCode(n.codeForm))}),t.TgZ(2,"div",10)(3,"label",11),t._uU(4,"Code :"),t.qZA(),t._UZ(5,"input",16),t.qZA(),t.TgZ(6,"button",13),t.YNc(7,v,2,0,"span",17),t.YNc(8,x,2,0,"span",17),t.qZA()()()}if(2&e){const o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.codeForm),t.xp6(6),t.Q6J("ngIf",!o.load),t.xp6(1),t.Q6J("ngIf",o.load)}}let Z=(()=>{class e{constructor(o,s){this._settings=o,this._route=s,this.emailForm=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email])}),this.message="Test Message",this.loader=!1,this.codeForm=new r.cw({resetCode:new r.NI(null,[r.kI.required])}),this.load=!1,this.accountNotFound=!1,this.codeIsInvalid=!1,this.messageError="",this.messageErrorCode="",window.scrollTo(0,0)}forgetPassword(o){this._settings.forgetPassword(o.value.email).subscribe({next:s=>{console.log(s),this.message=s.message,this.loader=!0,this.accountNotFound=!1},error:s=>{console.log(s),this.accountNotFound=!0,this.messageError=s.error.message}}),console.log(o.value)}verifySendCode(o){this._settings.verifyResetCode(o.value.resetCode).subscribe({next:s=>{console.log(s),this._route.navigate(["settings/reset-password"]),this.load=!0,this.codeIsInvalid=!1},error:s=>{console.log(o.value.resetCode),console.log(s),this.codeIsInvalid=!0,this.messageErrorCode=s.error.message}})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(l),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-forget-password"]],decls:6,vars:5,consts:[[1,""],["class","alert alert-danger my-2 p-2 text-capitalize",4,"ngIf"],["action","",3,"formGroup","ngSubmit",4,"ngIf"],["class","my-3 p-2 text-center",4,"ngIf"],["class","",4,"ngIf"],[1,"alert","alert-danger","my-2","p-2","text-capitalize"],["class","m-0 p-1 text-left",4,"ngIf"],[1,"m-0","p-1","text-left"],["action","",3,"formGroup","ngSubmit"],[1,"text-info","text-center","mt-3","p-2"],[1,"my-3"],["for","",1,"my-3","text-info","fw-bold"],["formControlName","email","type","text",1,"form-control","p-2"],["type","submit",1,"btn","btn-dark","d-block","ms-auto","py-2","px-3","my-4"],[1,"my-3","p-2","text-center"],[1,"text-info"],["formControlName","resetCode","type","text",1,"form-control","p-2"],[4,"ngIf"],[1,"fa","fa-spin","spinner"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0),t.YNc(1,f,2,1,"div",1),t.YNc(2,g,9,1,"form",2),t.YNc(3,_,3,1,"div",3),t.YNc(4,w,2,1,"div",1),t.YNc(5,C,9,3,"div",4),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngIf",n.accountNotFound),t.xp6(1),t.Q6J("ngIf",!n.loader),t.xp6(1),t.Q6J("ngIf",n.loader),t.xp6(1),t.Q6J("ngIf",n.codeIsInvalid),t.xp6(1),t.Q6J("ngIf",n.loader))},dependencies:[m.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return e})();var y=i(8763);let T=(()=>{class e{constructor(o,s,n){this._settings=o,this.toaster=s,this._route=n,this.resetForm=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email]),newPassword:new r.NI(null,[r.kI.required,r.kI.pattern(/^[a-z][a-z0-9]{6,20}$/)])})}resetPassword(o){this._settings.resetPassword(o.value).subscribe({next:s=>{console.log(s),localStorage.removeItem("userToken"),localStorage.setItem("userToken",s.token),this.toaster.success("","Update Password Succseffully!",{timeOut:3e3,positionClass:"toast-bottom-right",progressBar:!0})},error:s=>{console.log(o.value.resetCode),console.log(s)}})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(l),t.Y36(y._W),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-resset-password"]],decls:13,vars:1,consts:[["action","",3,"formGroup","ngSubmit"],[1,"text-info","text-center","mt-3","p-2"],[1,"my-3"],["for","",1,"my-3","text-info","fw-bold"],["formControlName","email","type","text",1,"form-control","p-2"],["formControlName","newPassword","type","password",1,"form-control","p-2"],["type","submit",1,"btn","btn-dark","d-block","ms-auto","py-2","px-3","my-4"]],template:function(s,n){1&s&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.resetPassword(n.resetForm)}),t.TgZ(1,"h2",1),t._uU(2,"Reset Password"),t.qZA(),t.TgZ(3,"div",2)(4,"label",3),t._uU(5,"Email :"),t.qZA(),t._UZ(6,"input",4),t.qZA(),t.TgZ(7,"div",2)(8,"label",3),t._uU(9,"New Password :"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.TgZ(11,"button",6),t._uU(12,"Send"),t.qZA()()),2&s&&t.Q6J("formGroup",n.resetForm)},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return e})();var b=i(8055);const F=[{path:"",redirectTo:"forget-password",pathMatch:"full"},{path:"forget-password",component:Z,title:"forget-password"},{path:"reset-password",component:T,title:"reset-password"},{path:"forget-password/verifycode",component:(()=>{class e{constructor(o){this._settings=o,this.codeForm=new r.cw({code:new r.NI(null,[r.kI.required])}),this.message="The Code will Be send In Email",this.loader=!1}verifySendCode(o){this._settings.verifyResetCode(this.codeForm.value).subscribe({next:s=>{console.log(s)},error:s=>{console.log(s)}})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(l))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-code"]],decls:8,vars:1,consts:[[1,""],["action","",3,"formGroup","ngSubmit"],[1,"my-3"],["for","",1,"my-3","text-info","fw-bold"],["formControlName","email","type","number",1,"form-control","p-2"],["routerLink","code","type","submit",1,"btn","btn-dark","d-block","ms-auto","py-2","px-3","my-4"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return n.verifySendCode(n.codeForm)}),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"Code :"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"button",5),t._uU(7,"Send"),t.qZA()()()),2&s&&(t.xp6(1),t.Q6J("formGroup",n.codeForm))},dependencies:[r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,c.rH]})}return e})(),title:"verify-code"},{path:"**",component:b.r,title:"Error 404"}];let I=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(F),c.Bz]})}return e})(),P=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[m.ez,r.u5,r.UX,I]})}return e})()}}]);